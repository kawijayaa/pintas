<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/styles.css">
    <script src="https://unpkg.com/htmx.org@2.0.1"></script>
    <title>pintas - url shortener</title>
</head>

<body class="bg-gray-900 flex items-center justify-center min-h-screen p-8">
    <div class="w-full h-full absolute flex justify-around items-center blur-[128px] overflow-hidden">
        <div class="size-64 rounded-full bg-purple-500 translate-y-32"></div>
        <div class="size-64 rounded-full bg-cyan-500 -translate-y-32"></div>
    </div>
    <div class="w-full md:w-1/2 h-1/2 p-6 md:p-8 bg-gray-200/20 drop-shadow-lg rounded-xl text-white"
        id="main-container">
        <h1 class="text-3xl font-bold tracking-widest mb-8">pintas</h1>
        <div class="w-3/4">
            <form id="form" hx-post="/shorten" hx-target="#main-container" hx-swap="outerHTML">
                <input type="text" name="redirect_url" class="w-full px-4 py-2 text-xl bg-gray-200/20 rounded-lg mb-2"
                    placeholder="https://enter-your-long-ass-url-here.com">
                <div class="flex items-center mb-4 gap-2 w-full">
                    <p class="text-xl">{{ .host }}/</p>
                    <input type="text" name="path" class="w-full px-4 py-2 text-xl bg-gray-200/20 rounded-lg"
                        placeholder="your-short-url">
                </div>
                <button
                    class="px-6 py-2 text-center text-xl bg-cyan-600 rounded-lg hover:shadow-xl hover:shadow-cyan-600/30">shorten</button>
                <p id="error" class="text-red-400 font-bold text-xl mt-2"></p>
            </form>
        </div>
    </div>
</body>

<script>
    document.getElementById('form').addEventListener('htmx:responseError', function (evt) {
        switch (evt.detail.xhr.status) {
            case 400:
                document.getElementById('error').innerHTML = "Invalid URL!";
                break;
            case 409:
                document.getElementById('error').innerHTML = "Path already exists!";
                break;
            default:
                document.getElementById('error').innerHTML = "Something went wrong... Try again later!";
                break;
        }

        setTimeout(function () {
            document.getElementById('error').innerHTML = "";
        }, 3000);
    });
</script>

</html>
